# 港股美股打新记录小程序

## 项目简介

这是一个用于记录港股和美股打新成本和盈利情况的微信小程序。帮助用户系统地管理和追踪打新投资的各项数据，包括申购、中签、卖出等各个环节的详细记录。

## 功能特性

### 1. 用户认证
- 微信授权登录
- 用户信息本地存储

### 2. 打新记录管理
- **新增打新记录**：录入股票名称、成本价、申购手数、手续费、额外成本、融资情况、投入总金额
- **中签结果录入**：关联正在打新的股票，录入中签股数和时间
- **卖出记录**：录入卖出价格、手续费等，自动计算盈亏
- **状态管理**：支持"打新中"和"打新结束"两种状态切换

### 3. 数据展示与统计
- **首页看板**：显示进行中和已完成的打新统计
- **历史记录**：按时间倒序展示所有打新记录
- **筛选功能**：支持按时间范围和状态筛选
- **盈亏计算**：自动计算每笔投资的盈利/亏损和收益率

### 4. 数据管理
- **实时修改**：在"打新结束"前，所有数据都可动态修改
- **自动计算**：修改后实时更新计算结果
- **本地存储**：数据保存在微信小程序本地存储中

## 页面结构

```
pages/
├── login/          # 登录页面
├── index/          # 首页（主要入口）
├── add-stock/      # 新增/编辑打新记录
├── winning-result/ # 中签结果录入
├── sell-record/    # 卖出记录录入
└── history/        # 历史记录查看
```

## 数据结构

### 股票记录数据结构
```javascript
{
  id: String,              // 唯一标识
  stockName: String,       // 股票名称
  costPrice: Number,       // 打新成本价
  subscriptionHands: Number, // 申购手数
  serviceFee: Number,      // 打新手续费
  extraCost: Number,       // 额外成本
  isFinancing: Boolean,    // 是否融资
  totalAmount: Number,     // 投入总金额
  status: String,          // 打新状态：'ongoing' | 'finished'
  createTime: Number,      // 打新时间（时间戳）
  
  // 中签信息
  winningShares: Number,   // 中签股数
  winningTime: Number,     // 中签时间（时间戳）
  
  // 卖出信息
  sellPrice: Number,       // 卖出价格
  sellShares: Number,      // 卖出股数
  sellFee: Number,         // 卖出手续费
  otherFee: Number,        // 其他费用
  sellTime: Number,        // 卖出时间（时间戳）
  profit: Number           // 盈利金额
}
```

## 计算逻辑

### 盈亏计算公式
```
净盈亏 = 卖出金额 - 成本金额 - 总手续费

其中：
- 卖出金额 = 卖出价格 × 卖出股数
- 成本金额 = 成本价格 × 卖出股数
- 总手续费 = 买入手续费（按比例） + 卖出手续费 + 其他费用
```

### 收益率计算
```
收益率 = (净盈亏 ÷ 成本金额) × 100%
```

### 中签率计算
```
中签率 = (中签股数 ÷ 申购股数) × 100%

注意：港股以手为单位，每手通常100股；美股直接以股为单位
```

## 使用说明

1. **首次使用**：需要进行微信授权登录
2. **添加记录**：点击"新增打新记录"填写基本信息
3. **录入中签**：中签结果公布后，在对应记录中"录入中签"
4. **记录卖出**：股票卖出后，录入卖出信息完成整个投资周期
5. **查看历史**：在历史记录页面可以筛选和查看所有投资记录

## 技术特点

- **响应式设计**：适配不同尺寸的手机屏幕
- **数据持久化**：使用微信小程序本地存储
- **实时计算**：数据修改后实时更新计算结果
- **用户体验**：简洁直观的界面设计
- **数据验证**：完善的表单验证机制

## 开发环境

- 微信开发者工具
- 微信小程序框架

## 部署说明

1. 在微信公众平台注册小程序账号
2. 在微信开发者工具中导入项目
3. 配置小程序基本信息
4. 上传代码并提交审核
5. 审核通过后发布上线

## 注意事项

- 数据仅存储在本地，建议定期备份重要数据
- 港股和美股的计算逻辑略有不同，系统会自动识别
- 建议在WIFI环境下使用以获得更好的体验

## 后续优化方向

1. 增加数据云端同步功能
2. 添加更多统计图表展示
3. 支持数据导出功能
4. 增加股票价格实时查询
5. 添加投资建议和分析功能

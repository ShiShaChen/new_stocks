# 卖出收入显示符号修复说明

## 问题描述
之前的实现中，所有业务交易在资金流水中都显示为负数（除了存款），包括卖出收入。但是卖出收入应该显示为正数，因为它代表资金的增加。

## 修复内容

### 1. 符号显示逻辑修复
✅ **正确的符号显示规则**
- **正向交易（显示+号）**：
  - `sell` - 卖出收入
  - `allot_refund` - 中签退款
  - `fee_refund` - 手续费退款
  - `deposit` - 资金转入

- **负向交易（显示-号）**：
  - `subscribe` - 打新申购
  - `allot` - 中签扣款
  - `fee_deduction` - 手续费扣除
  - `sell_refund` - 卖出退款
  - `withdraw` - 资金转出

### 2. 代码结构优化
✅ **类型字段分离**
- `originalType`: 保留原始业务类型，用于逻辑判断
- `displayType`: 用于显示的类型标签
- 避免了类型转换后影响逻辑判断的问题

### 3. 颜色样式优化
✅ **金额颜色规则**
- 绿色（positive）：增加资金的交易
- 红色（negative）：减少资金的交易
- 与符号显示保持一致

## 修改的文件

1. **pages/fund-detail/fund-detail.js**
   - 修复了业务记录的类型字段处理
   - 更新了 `getAmountColorClass` 函数
   - 更新了 `getRecordIcon` 函数

2. **pages/fund-detail/fund-detail.wxml**
   - 修复了金额符号显示逻辑
   - 现在正确显示卖出收入为正数

## 资金流水显示示例

### 修复前（错误）
```
- HK$350,000.00  卖出收入 腾讯控股 1000股 @350.00
- HK$100.00      卖出手续费 腾讯控股 1000股
```

### 修复后（正确）
```
+ HK$350,000.00  卖出收入 腾讯控股 1000股 @350.00  [绿色]
- HK$100.00      卖出手续费 腾讯控股 1000股        [红色]
```

## 验证要点

1. **卖出收入**：应显示为 `+HK$xxx.xx`，绿色
2. **手续费扣除**：应显示为 `-HK$xxx.xx`，红色
3. **中签退款**：应显示为 `+HK$xxx.xx`，绿色
4. **账户余额**：负数时显示为 `-HK$xxx.xx`

## 测试建议

1. 进行一次完整的卖出操作，查看资金流水
2. 确认卖出收入显示为正数（绿色）
3. 确认手续费扣除显示为负数（红色）
4. 检查账户余额的正确变化
5. 测试修改卖出记录时的回滚操作

这个修复确保了资金流水的直观性，用户可以清楚地看到哪些交易增加了资金，哪些交易减少了资金。

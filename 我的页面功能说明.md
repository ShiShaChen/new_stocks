# 用户"我的"页面功能实现说明

## 功能概述
新增了"我的"页面作为独立的导航栏页面，包含用户信息展示和退出登录功能，同时保留用户数据。

## 主要功能

### 1. 新增"我的"页面
- 路径：`pages/profile/profile`
- 显示用户头像、昵称等基本信息
- 提供关于应用和意见反馈功能
- 包含退出登录按钮

### 2. 导航栏配置
- 在 `app.json` 中新增第三个 tab："我的"
- 导航栏包含：首页、历史记录、我的

### 3. 退出登录功能
- 点击退出按钮会弹出确认对话框
- 退出时只清除用户信息 (`userInfo`)
- **保留所有业务数据**（股票记录、中签记录等）
- 退出后自动跳转到登录页面

### 4. 首页优化
- 移除了原有的用户信息栏
- 用户信息现在统一在"我的"页面显示
- 调整了统计信息容器的上边距

## 技术实现

### 文件结构
```
pages/profile/
├── profile.wxml    # 页面结构
├── profile.wxss    # 页面样式
└── profile.js      # 页面逻辑
```

### 核心功能代码

#### 退出登录逻辑
```javascript
performLogout() {
  try {
    // 只清除用户信息，保留其他数据
    wx.removeStorageSync('userInfo')
    
    // 更新页面状态
    this.setData({
      userInfo: null
    })

    // 显示退出成功提示
    wx.showToast({
      title: '退出成功',
      icon: 'success'
    })

    // 跳转到登录页面
    setTimeout(() => {
      wx.reLaunch({
        url: '/pages/login/login'
      })
    }, 1500)
  } catch (error) {
    console.error('退出登录失败:', error)
    wx.showToast({
      title: '退出失败，请重试',
      icon: 'error'
    })
  }
}
```

#### 数据保留策略
- 只清除 `userInfo` 存储项
- 保留股票记录数据
- 保留中签记录数据
- 保留卖出记录数据
- 保留所有业务相关的本地存储

### 页面样式特点
- 渐变色用户信息区域
- 卡片式菜单设计
- 醒目的退出按钮
- 适配移动端的布局

## 修改的文件

### 新增文件
- `/pages/profile/profile.wxml`
- `/pages/profile/profile.wxss` 
- `/pages/profile/profile.js`

### 修改文件
- `/app.json` - 添加新页面路由和 tabBar 配置
- `/pages/index/index.wxml` - 移除用户信息栏
- `/pages/index/index.wxss` - 移除用户信息栏样式，调整间距

## 使用说明

### 用户操作流程
1. 用户在底部导航栏点击"我的"
2. 进入个人信息页面，可以看到头像和昵称
3. 点击"退出登录"按钮
4. 确认退出后，用户信息被清除
5. 自动跳转到登录页面
6. 用户重新登录后，之前的股票记录仍然存在

### 注意事项
- 退出登录不会删除任何业务数据
- 重新登录后可以继续查看之前的记录
- 用户可以随时在"我的"页面查看个人信息
- 提供了关于应用和意见反馈的入口

## 测试建议
1. 测试"我的"页面的显示是否正常
2. 测试退出登录功能是否正常工作
3. 验证退出后数据是否保留
4. 测试重新登录后数据是否仍然存在
5. 检查导航栏切换是否正常

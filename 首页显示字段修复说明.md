# 首页显示字段修复说明

## 问题描述
在首页的进行中打新和最近完成的打新列表中，显示的"成本"字段仍在使用旧的`costPrice`字段，需要修正为新的`issuePrice`字段（股票发行价）。

## 修复内容

### 1. 进行中的打新列表
**修复前：**
```xml
<text class="stock-detail">申购 {{item.subscriptionHands}} 手 | 成本 ¥{{item.costPrice}}</text>
```

**修复后：**
```xml
<text class="stock-detail">申购 {{item.subscriptionHands}} 手 | 发行价 ¥{{item.issuePrice}}</text>
```

### 2. 最近完成的打新列表
**修复前：**
```xml
<text class="stock-detail">中签 {{item.winningShares}} 股 | 成本 ¥{{item.costPrice}}</text>
```

**修复后：**
```xml
<text class="stock-detail">中签 {{item.winningShares}} 股 | 发行价 ¥{{item.issuePrice}}</text>
```

## 修复原因

### 1. 字段重构
在新增打新页面字段调整中，我们将原来的`costPrice`（打新成本价）字段重构为：
- `issuePrice`：股票发行价
- `packageFee`：打新套餐费用

### 2. 语义准确性
- **发行价**：更准确地反映股票的实际发行价格
- **成本**：在原有语境下容易与总成本混淆
- **套餐费用**：独立显示打新相关的费用

### 3. 数据一致性
确保首页显示与其他页面（新增、编辑、历史记录）的字段命名和数据源保持一致。

## 显示效果

### 进行中的打新
```
股票名称
申购 100 手 | 发行价 ¥15.80
2024-01-15 14:30
[打新中] [录入中签]
```

### 最近完成的打新
```
股票名称  
中签 500 股 | 发行价 ¥15.80
2024-01-10 09:15
[已结束] +1,250元
```

## 相关影响

### 1. 数据兼容性
- 旧数据中的`costPrice`字段需要映射为`issuePrice`
- 新数据使用`issuePrice`字段存储发行价
- 向后兼容处理确保旧数据正常显示

### 2. 计算逻辑
- 中签金额计算：`winningShares * issuePrice`
- 成本计算：`issuePrice * sellShares`
- 盈亏计算：`sellAmount - costAmount - totalFees`

### 3. 其他页面同步
- ✅ 新增/编辑页面：已更新
- ✅ 历史记录页面：已更新
- ✅ 中签结果页面：已更新
- ✅ 卖出记录页面：已更新
- ✅ 首页显示：本次修复

## 测试验证

### 1. 显示测试
- [ ] 进行中打新列表正确显示发行价
- [ ] 最近完成打新列表正确显示发行价
- [ ] 字段标签从"成本"改为"发行价"

### 2. 数据测试
- [ ] 新增记录在首页正确显示
- [ ] 编辑记录后首页显示更新
- [ ] 旧数据兼容性正常

### 3. 功能测试
- [ ] 点击进入编辑功能正常
- [ ] 录入中签功能正常
- [ ] 录入卖出功能正常

## 总结

通过本次修复，首页的显示字段与整个应用的数据结构保持了一致性：

1. **统一性**：所有页面都使用`issuePrice`字段
2. **准确性**：显示标签更准确地反映字段含义
3. **一致性**：数据源和显示逻辑保持同步

用户现在在首页可以清晰地看到每只股票的发行价信息，这对于投资决策和盈亏分析更有参考价值。
